---

- name: Create Grafana dashboards
  kubernetes.core.k8s:
    state: present
    kubeconfig: "{{ kubeconfig }}"
    proxy: "{{ proxy_url | default(omit, true) }}"
    proxy_headers: "{{ proxy_headers | default(omit, true) }}"
    template: "grafana-dashboard.yml.j2"
    namespace: monitoring
  loop: "{{ kubernetes_prometheus_dashboards }}"
